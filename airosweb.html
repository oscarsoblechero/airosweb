<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contacto</title>
  <style>
    :root { color-scheme: light; }
    body{
      margin:0;
      font-family: Arial, Helvetica, sans-serif;
      background:#f6f7fb;
      color:#111;
    }
    .wrap{
      max-width: 720px;
      margin: 48px auto;
      padding: 0 16px;
    }
    .card{
      background:#fff;
      border:1px solid #e6e8ef;
      border-radius: 14px;
      padding: 22px;
      box-shadow: 0 6px 18px rgba(0,0,0,.06);
    }
    h1{ margin:0 0 8px; font-size: 26px; }
    p{ margin:0 0 18px; color:#444; line-height:1.4; }

    form{ display:grid; gap: 14px; }
    label{ font-size: 14px; font-weight: 700; }
    input, textarea{
      width:100%;
      box-sizing:border-box;
      padding: 10px 12px;
      border:1px solid #cfd6e4;
      border-radius: 10px;
      font-size: 15px;
      outline: none;
      background:#fff;
    }
    input:focus, textarea:focus{
      border-color:#4a74ff;
      box-shadow: 0 0 0 3px rgba(74,116,255,.15);
    }
    textarea{ min-height: 130px; resize: vertical; }

    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    @media (max-width: 640px){
      .row{ grid-template-columns: 1fr; }
    }

    .error{
      color:#b00020;
      font-size: 13px;
      margin-top: 6px;
      display:none;
    }
    .actions{
      display:flex;
      gap: 10px;
      align-items:center;
      margin-top: 4px;
    }
    button{
      border:0;
      background:#4a74ff;
      color:#fff;
      font-weight: 700;
      padding: 10px 14px;
      border-radius: 10px;
      cursor:pointer;
      font-size: 15px;
    }
    button:disabled{ opacity:.6; cursor:not-allowed; }

    .status{
      margin-top: 14px;
      padding: 12px 14px;
      border-radius: 10px;
      border:1px solid transparent;
      display:none;
      font-size: 14px;
    }
    .status.ok{
      background:#e8fff0;
      border-color:#b7f0c6;
      color:#0b6a2b;
    }
    .status.bad{
      background:#fff1f1;
      border-color:#ffd0d0;
      color:#8a1020;
    }
  </style>
</head>
<body>
  <main class="wrap">
    <section class="card">
      <h1>Contacto</h1>
      <p>Rellena el formulario y te responderé lo antes posible.</p>

      <form id="contactForm" novalidate>
        <div class="row">
          <div>
            <label for="name">Nombre</label>
            <input id="name" name="name" type="text" placeholder="Tu nombre" autocomplete="name" />
            <div class="error" id="errName">Introduce tu nombre (mín. 2 caracteres).</div>
          </div>

          <div>
            <label for="email">Email</label>
            <input id="email" name="email" type="email" placeholder="tu@email.com" autocomplete="email" />
            <div class="error" id="errEmail">Introduce un email válido.</div>
          </div>
        </div>

        <div>
          <label for="subject">Asunto</label>
          <input id="subject" name="subject" type="text" placeholder="Motivo del mensaje" />
          <div class="error" id="errSubject">Introduce un asunto (mín. 3 caracteres).</div>
        </div>

        <div>
          <label for="message">Mensaje</label>
          <textarea id="message" name="message" placeholder="Escribe tu mensaje..."></textarea>
          <div class="error" id="errMessage">El mensaje debe tener al menos 10 caracteres.</div>
        </div>

        <div class="actions">
          <button id="btnSend" type="submit">Enviar</button>
          <button type="button" id="btnClear" style="background:#2f3440;">Limpiar</button>
        </div>

        <div class="status ok" id="statusOk">Mensaje enviado correctamente (simulado). ✅</div>
        <div class="status bad" id="statusBad">Revisa los campos marcados. ❌</div>
      </form>
    </section>
  </main>

  <script>
    const form = document.getElementById("contactForm");
    const btnSend = document.getElementById("btnSend");
    const btnClear = document.getElementById("btnClear");

    const statusOk = document.getElementById("statusOk");
    const statusBad = document.getElementById("statusBad");

    const fields = {
      name: document.getElementById("name"),
      email: document.getElementById("email"),
      subject: document.getElementById("subject"),
      message: document.getElementById("message"),
    };

    const errors = {
      name: document.getElementById("errName"),
      email: document.getElementById("errEmail"),
      subject: document.getElementById("errSubject"),
      message: document.getElementById("errMessage"),
    };

    function show(el){ el.style.display = "block"; }
    function hide(el){ el.style.display = "none"; }

    function isValidEmail(email){
      return /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(email.trim());
    }

    function validate(){
      let ok = true;

      const nameVal = fields.name.value.trim();
      const emailVal = fields.email.value.trim();
      const subjectVal = fields.subject.value.trim();
      const msgVal = fields.message.value.trim();

      // Nombre
      if (nameVal.length < 2) { show(errors.name); ok = false; }
      else hide(errors.name);

      // Email
      if (!isValidEmail(emailVal)) { show(errors.email); ok = false; }
      else hide(errors.email);

      // Asunto
      if (subjectVal.length < 3) { show(errors.subject); ok = false; }
      else hide(errors.subject);

      // Mensaje
      if (msgVal.length < 10) { show(errors.message); ok = false; }
      else hide(errors.message);

      return ok;
    }

    function resetStatus(){
      hide(statusOk);
      hide(statusBad);
      statusOk.classList.remove("ok");
      statusBad.classList.remove("bad");
    }

    // Validación en tiempo real (suave)
    Object.values(fields).forEach(input => {
      input.addEventListener("input", () => {
        validate();
        resetStatus();
      });
    });

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      resetStatus();

      const ok = validate();
      if (!ok) {
        show(statusBad);
        return;
      }

      // Simulación de envío (sin backend)
      btnSend.disabled = true;
      btnSend.textContent = "Enviando...";

      const payload = {
        name: fields.name.value.trim(),
        email: fields.email.value.trim(),
        subject: fields.subject.value.trim(),
        message: fields.message.value.trim(),
        sentAt: new Date().toISOString(),
      };

      console.log("Mensaje (simulado):", payload);

      await new Promise(r => setTimeout(r, 700));

      show(statusOk);
      form.reset();

      btnSend.disabled = false;
      btnSend.textContent = "Enviar";
    });

    btnClear.addEventListener("click", () => {
      form.reset();
      Object.values(errors).forEach(hide);
      resetStatus();
    });
  </script>
</body>
</html>
